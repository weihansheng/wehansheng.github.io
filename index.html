<!doctype html>



  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Johan007" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="Johan007">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Johan007">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Johan007">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: 'Q64HSMOKKH',
      apiKey: '85afafe1d0aaed2b30f0e8c0d98d8f50',
      indexName: 'Johan007',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Johan007</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  















  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Johan007</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/26/Ubuntu-14-04-上安装-CUDA-8-0-详细教程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johan007">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johan007">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/26/Ubuntu-14-04-上安装-CUDA-8-0-详细教程/" itemprop="url">Ubuntu 14.04 上安装 CUDA 8.0 详细教程</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-26T19:58:19+08:00">
                2017-05-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Cuda/" itemprop="url" rel="index">
                    <span itemprop="name">Cuda</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近要用cuda改进一个算法，就开始装cuda，一开始是在虚拟机的ubuntu中装的，后台在装显卡驱动时总是出错，google才知道虚拟机用的是虚拟显卡。因此就装了win10+ubuntu双系统，先装的是16.04，可是在选中安装后总是黑屏，没有任何显示（可能是显卡的原因），后来就换了ubuntu14.04，安装成功。但是在装其他软件的时候更新了系统软件（泪奔啊）重启之后就再也进不去了，尝试了很多方法都不行，最后果断重装ubuntu14.04，不敢再更新软件…<br>有个win10+ubuntu14.04的教程写的很详细，推荐给大家：<a href="http://www.jianshu.com/p/2eebd6ad284d" target="_blank" rel="external">win10+ubuntu14.04教程</a></p>
<p>下面正是开始安装cuda8.0<br>安装CUDA主要分三大环节。 </p>
<p>一、安装前的环境准备和检查 </p>
<p>二、安装CUDA </p>
<p>三、安装完的校验。</p>
<h2 id="一、安装前的环境准备和检查"><a href="#一、安装前的环境准备和检查" class="headerlink" title="一、安装前的环境准备和检查"></a>一、安装前的环境准备和检查</h2><h3 id="1、检查自己的电脑环境是否具备安装CUDA的条件"><a href="#1、检查自己的电脑环境是否具备安装CUDA的条件" class="headerlink" title="1、检查自己的电脑环境是否具备安装CUDA的条件"></a>1、检查自己的电脑环境是否具备安装CUDA的条件</h3><p>a) 检查自己的GPU是否是CUDA-capable</p>
<p>在终端中输入： <pre><code>$ lspci | grep -i nvidia </code></pre>会显示自己的NVIDIA GPU版本信息<br>去CUDA的官网查看自己的GPU版本是否在CUDA的支持列表中</p>
<p>b) 检查自己的Linux版本是否支持 CUDA(Ubuntu 14.04没问题)</p>
<p>c) 检查自己的系统中是否装了gcc</p>
<p>在终端中输入： <pre><code>$gcc –version </code></pre>可以查看自己的gcc版本信息</p>
<p>d) 检查是否安装了kernel header和 package development</p>
<p>在终端中输入： <pre><code>$uname –r </code></pre>可以查看自己的kernel版本信息<br>在终端中输入：<pre><code>$ sudo apt-get install linux-headers-$(uname -r) </code></pre><br>可以安装对应kernel版本的kernel header和package development</p>
<p>以上检查我的电脑系统都满足要求，如果没有满足要求的话，可以参考cuda的官方文档，里面有详细的针对每个问题的解决方案。</p>
<h3 id="2、-选择安装方式"><a href="#2、-选择安装方式" class="headerlink" title="2、 选择安装方式"></a>2、 选择安装方式</h3><p>CUDA提供两种安装方式：package manager安装和runfile安装<br>我本来选的是 package manager 安装，这种方法相对简单，但尝试了几次都失败。后来是转换到runfile安装才成功的。因此此处只介绍runfile安装方式。</p>
<p>下载cuda安装包：cuda官网下载，根据系统信息选择对应的版本，runfile安装的话最后一项要选择 runfile文件</p>
<p><a href="https://developer.nvidia.com/cuda-downloads" target="_blank" rel="external">CUDA 8.0 下载链接</a></p>
<h2 id="二、安装CUDA"><a href="#二、安装CUDA" class="headerlink" title="二、安装CUDA"></a>二、安装CUDA</h2><h3 id="1-runfile安装cuda"><a href="#1-runfile安装cuda" class="headerlink" title="1.runfile安装cuda"></a>1.runfile安装cuda</h3><p>a) 禁用 nouveau</p>
<p>终端中运行：<pre><code>$ lsmod | grep nouveau</code></pre>如果有输出则代表nouveau正在加载。</p>
<p>Ubuntu的nouveau禁用方法：<br>在/etc/modprobe.d中创建文件blacklist-nouveau.conf</p>
<pre><code>$cd /etc/modprobe.d
$touch blacklist-nouveau.conf
</code></pre>
打开blacklist-nouveau.confoptions <pre><code>$sudo gedit blacklist-nouveau.conf</code></pre>
并输入以下内容:

<pre><code>blacklist nouveau
nouveau modeset=0</code></pre>

<p>打开终端，运行</p>
<pre><code>$ sudo update-initramfs –u</code></pre>

<p>设置完毕可以再次运行 <pre><code>$ lsmod | grep nouveau </code></pre>检查是否禁用成功，如果运行后没有任何输出，则代表禁用成功。如果配置过后还有输出重启电脑即可。</p>
<p>b) 重启电脑，到达登录界面时，alt+ctrl+f1(注意千万不要输入密码进入图形界面)，进入text mode，登录账户</p>
<p>c) 关闭图形化界面,输入</p>
<pre><code> $ sudo service lightdm stop
</code></pre> 


<p>d) 切换到cuda安装文件的路径，运行</p>
<pre><code>$ sudo sh cuda_xxxx.run</code></pre>

<p>按照提示一步步操作</p>
<p>遇到提示是否安装openGL ，选择no（如果你的电脑跟我一样是双显，且主显是非NVIDIA的GPU需要选择no，否则可以yes）<br>其他都选择yes或者默认<br>安装成功后，会显示installed，否则会显示failed。</p>
<p>e)重新启动图形化界面 输入</p>
<pre><code> $ sudo service lightdm start </code></pre>

<p>Alt + ctrl +F7，返回到图形化登录界面，输入密码登录。<br>如果能够成功登录，则表示不会遇到循环登录的问题，基本说明CUDA的安装成功了。</p>
<p>f) 重启电脑。检查Device Node Verification。</p>
<p>检查路径/dev下 有无存在名为nvidia*（以nvidia开头）的多个文件(device files)<br>如果没有的话，可以参考官方文档里的指导步骤，进行添加。</p>
<p>g) 设置环境变量。</p>
<p>终端中输入<br> <pre><code>$ sudo gedit /etc/profile </code></pre><br>在打开的文件末尾，添加以下两行。</p>
<pre><code>$ export PATH=/usr/local/cuda-8.0/bin:$PATH
$ export LD_LIBRARY_PATH=/usr/local/cuda8.0/lib64</code></pre>

<p>保存文件。</p>
<p>这里有点与官方安装文档稍有不同，需要说明：</p>
<p>官方文档里说只需在终端中运行上述两条export语句即可，但如果不将它们不写入/etc/profile文件的话，这样的环境变量在你退出终端后就消失了，不起作用了，所以写入才是永久的做法。</p>
<p>h) 重启电脑，检查上述的环境变量是否设置成功。</p>
<p>终端中输入 : <pre><code>$ env </code></pre><br>在输出的环境变量中检查有无上述 </p>
<p>g) 中设置的变量，如果有则代表设置成功。</p>
<p>到此为止，CUDA的安装算是告一段落了。为了保险起见，建议进行下述的检查工作，确保真正的安装成功。</p>
<h2 id="三、安装完毕后的检查工作"><a href="#三、安装完毕后的检查工作" class="headerlink" title="三、安装完毕后的检查工作"></a>三、安装完毕后的检查工作</h2><p>a) 检查 NVIDIA Driver是否安装成功</p>
<p>终端输入 ：</p>
<pre><code>$ cat /proc/driver/nvidia/version </code></pre>会输出NVIDIA Driver的版本号

b) 检查 CUDA Toolkit是否安装成功

终端输入 ： <pre><code>$ nvcc –V</code></pre> 会输出CUDA的版本信息

c) 尝试编译cuda提供的矩阵乘法的例子

切换到例子存放的路径，默认路径是 ~/NVIDIA_CUDA-8.0_Samples 
（即 /home/xxx/ NVIDIA_CUDA-8.0_Samples/0_Simple/matrixMul， xxx是你自己的用户名）

然后终端输入：<pre><code>$ make</code></pre>

<p>如果出现错误的话，则会立即报错停止，否则会开始进入编译阶段。<br>我的第一次运行时出现了报错，提示的错误信息是系统中没有gcch或g++<br>然后在终端运行 <code>$ sudo apt-get install gcc </code><br><code>和<br>sudo apt-get install g++</code>安装完gcc和g++后 再make就正常了<br>整个编译的时间持续比较长，耐心等待，大概十几分钟是需要的。</p>
<p>d) 运行编译生成的二进制文件。</p>
<p>编译后的二进制文件 默认存放在/home/xxx/ NVIDIA_CUDA-8.0_Samples/0_Simple/matrixMul中。<br>切换路径 ： <pre><code>cd /home/xxx/ NVIDIA_CUDA-8.0_Samples/0_Simple/matrixMul </code></pre><br>终端输入 ：<pre><code>$ ./matrixMul </code></pre></p>
<p>即可看到输出结果</p>
<p>使用Nsight</p>
<p>在终端中输入<code>$nsight</code>即可启动nsightIDE</p>
<p><a href="http://blog.csdn.net/masa_fish/article/details/51882183" target="_blank" rel="external">参考:http://blog.csdn.net/masa_fish/article/details/51882183</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/08/GreenDao的简单使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johan007">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johan007">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/08/GreenDao的简单使用/" itemprop="url">GreenDao的简单使用</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-08T21:30:41+08:00">
                2017-05-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="关于GreenDao"><a href="#关于GreenDao" class="headerlink" title="关于GreenDao"></a>关于GreenDao</h2><p>greenDao是一个将对象映射到SQLite数据库中的轻量且快速的ORM解决方案。<br>关于greenDAO的概念可以看官网greenDAO</p>
<h2 id="GreenDAO-优势"><a href="#GreenDAO-优势" class="headerlink" title="GreenDAO 优势"></a>GreenDAO 优势</h2><p>1、一个精简的库</p>
<p>2、性能最大化</p>
<p>3、内存开销最小化</p>
<p>4、易于使用的 APIs</p>
<p>5、对 Android 进行高度优化</p>
<h2 id="GreenDao-3-0使用"><a href="#GreenDao-3-0使用" class="headerlink" title="GreenDao 3.0使用"></a>GreenDao 3.0使用</h2><p>GreenDao 3.0采用注解的方式来定义实体类，通过gradle插件生成相应的代码。</p>
<p>一，在as中导入相关的包<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">compile<span class="string">'org.greenrobot:greendao:3.0.1'</span></div><div class="line">compile<span class="string">'org.greenrobot:greendao-generator:3.0.0'</span></div></pre></td></tr></table></figure></p>
<p>二，在build.gradle中进行配置：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'org.greenrobot.greendao'</span></div><div class="line">buildscript &#123; </div><div class="line">    repositories &#123; </div><div class="line">        mavenCentral()    </div><div class="line">&#125;    </div><div class="line">dependencies &#123;</div><div class="line">    classpath <span class="string">'org.greenrobot:greendao-gradle-plugin:3.0.0'</span>    </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在gradle的根模块中加入上述代码。</p>
<p>三，自定义路径</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">greendao &#123;</div><div class="line">    schemaVersion <span class="number">1</span></div><div class="line">    daoPackage <span class="string">'com.anye.greendao.gen'</span></div><div class="line">    targetGenDir <span class="string">'src/main/java'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在gradle的根模块中加入上述代码，就完成了我们的基本配置了。<br>属性介绍：<br>schemaVersion–&gt; 指定数据库schema版本号，迁移等操作会用到;<br>daoPackage –&gt; dao的包名，包名默认是entity所在的包；<br>targetGenDir –&gt; 生成数据库文件的目录;</p>
<p>四，创建一个User的实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Entity</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</div><div class="line">    <span class="meta">@Id</span> </div><div class="line">    <span class="keyword">private</span> Long id; </div><div class="line">    <span class="keyword">private</span> String name; </div><div class="line">    <span class="meta">@Transient</span> </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> tempUsageCount; <span class="comment">// not persisted  </span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>五，MakeProject</p>
<p>编译项目，User实体类会自动编译，生成get、set方法并且会在com.anye.greendao.gen目录下生成三个文件；</p>
<p>greenDao<br>GreenDao使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> <span class="keyword">extends</span> <span class="title">Application</span> </span>&#123;</div><div class="line"> <span class="keyword">private</span> DaoMaster.DevOpenHelper mHelper;</div><div class="line"> <span class="keyword">private</span> SQLiteDatabase db;</div><div class="line"> <span class="keyword">private</span> DaoMaster mDaoMaster;</div><div class="line"> <span class="keyword">private</span> DaoSession mDaoSession;</div><div class="line"> <span class="keyword">public</span> <span class="keyword">static</span> MyApplication instances;</div><div class="line"> <span class="meta">@Override</span>    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</div><div class="line">     <span class="keyword">super</span>.onCreate();</div><div class="line">     instances = <span class="keyword">this</span>;</div><div class="line">     setDatabase();</div><div class="line"> &#125;</div><div class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MyApplication <span class="title">getInstances</span><span class="params">()</span></span>&#123;</div><div class="line">     <span class="keyword">return</span> instances;</div><div class="line"> &#125;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setDatabase</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">// 通过 DaoMaster 的内部类 DevOpenHelper，你可以得到一个便利的 SQLiteOpenHelper 对象。</span></div><div class="line">    <span class="comment">// 可能你已经注意到了，你并不需要去编写「CREATE TABLE」这样的 SQL 语句，因为 greenDAO 已经帮你做了。</span></div><div class="line">    <span class="comment">// 注意：默认的 DaoMaster.DevOpenHelper 会在数据库升级时，删除所有的表，意味着这将导致数据的丢失。</span></div><div class="line">    <span class="comment">// 所以，在正式的项目中，你还应该做一层封装，来实现数据库的安全升级。</span></div><div class="line">    mHelper = <span class="keyword">new</span> DaoMaster.DevOpenHelper(<span class="keyword">this</span>, <span class="string">"notes-db"</span>, <span class="keyword">null</span>);</div><div class="line">    db = mHelper.getWritableDatabase();</div><div class="line">    <span class="comment">// 注意：该数据库连接属于 DaoMaster，所以多个 Session 指的是相同的数据库连接。 </span></div><div class="line">    mDaoMaster = <span class="keyword">new</span> DaoMaster(db); </div><div class="line">    mDaoSession = mDaoMaster.newSession();</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> DaoSession <span class="title">getDaoSession</span><span class="params">()</span> </span>&#123;</div><div class="line">      <span class="keyword">return</span> mDaoSession;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> SQLiteDatabase <span class="title">getDb</span><span class="params">()</span> </span>&#123;</div><div class="line">      <span class="keyword">return</span> db;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>获取UserDao对象：</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mUserDao = MyApplication.getInstances().getDaoSession().getUserDao();</div></pre></td></tr></table></figure>
<p>简单的增删改查实现：</p>
<ol>
<li>增</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mUser = <span class="keyword">new</span> User((<span class="keyword">long</span>)<span class="number">2</span>,<span class="string">"anye3"</span>);</div><div class="line">mUserDao.insert(mUser);<span class="comment">//添加一个</span></div></pre></td></tr></table></figure>
<ol>
<li>删</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mUserDao.deleteByKey(id);</div></pre></td></tr></table></figure>
<ol>
<li>改</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mUser = <span class="keyword">new</span> User((<span class="keyword">long</span>)<span class="number">2</span>,<span class="string">"anye0803"</span>);</div><div class="line">mUserDao.update(mUser);</div></pre></td></tr></table></figure>
<ol>
<li>查</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">List&lt;User&gt; users = mUserDao.loadAll();</div><div class="line">String userName = <span class="string">""</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; users.size(); i++) &#123;</div><div class="line">    userName += users.get(i).getName()+<span class="string">","</span>;</div><div class="line">&#125;</div><div class="line">mContext.setText(<span class="string">"查询全部数据==&gt;"</span>+userName);</div></pre></td></tr></table></figure>
<p>更多的操作就不一一介绍了，大家可以根据需要去查找资料。</p>
<h2 id="Greendao中的注解"><a href="#Greendao中的注解" class="headerlink" title="Greendao中的注解"></a>Greendao中的注解</h2><p>(一) </p>
<p>@Entity 定义实体</p>
<p>@nameInDb 在数据库中的名字，如不写则为实体中类名</p>
<p>@indexes 索引</p>
<p>@createInDb 是否创建表，默认为true,false时不创建</p>
<p>@schema 指定架构名称为实体</p>
<p>@active 无论是更新生成都刷新</p>
<p>(二) @Id</p>
<p>(三) @NotNull 不为null</p>
<p>(四) @Unique 唯一约束</p>
<p>(五) @ToMany 一对多</p>
<p>(六) @OrderBy 排序</p>
<p>(七) @ToOne 一对一</p>
<p>(八) @Transient 不存储在数据库中</p>
<p>(九) @generated 由greendao产生的构造函数或方法</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/08/First/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johan007">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johan007">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/08/First/" itemprop="url">First</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-08T15:22:41+08:00">
                2017-05-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这是一个段落</p><br><p>这是另一个段落</p><br><em>这是斜体</em><br><br><em>这也是斜体</em><br><br><strong>这是粗体</strong><br><br><strong><em>这是粗体+斜体</em></strong><br><br><strike>就像这样</strike><br><h1> 这是 H1</h1><br><h2>这是 H2 </h2><br><br><h3>这是 H3 </h3><br><p>这是一个普通段落：</p>

<pre><code>这是一个代码区块。
private String hello;
</code></pre>

<hr>
<p><a href="http://example.com/" target="_blank" rel="external">an example</a><br><img src="Test/shanghai.jpg" alt="logo"><img src="/path/to/img.jpg" alt="Alt text"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/08/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johan007">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johan007">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/08/hello-world/" itemprop="url">Hello World</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-08T14:06:13+08:00">
                2017-05-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/28/Bmob添加多对多关系/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johan007">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johan007">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/28/Bmob添加多对多关系/" itemprop="url">Bmob添加多对多关系</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-28T13:49:33+08:00">
                2017-04-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//添加喜欢关联  多对多</span></div><div class="line">User user = BmobUser.getCurrentUser(User.class);</div><div class="line"><span class="comment">//PuzzleInfo puzzleInfo= new PuzzleInfo(); </span></div><div class="line"><span class="comment">//将当前用户添加到Post表中的likes字段值中，表明当前用户喜欢该帖子</span></div><div class="line">BmobRelation relation = <span class="keyword">new</span> BmobRelation();</div><div class="line"><span class="comment">//将当前用户添加到多对多关联中</span></div><div class="line">relation.add(user);</div><div class="line"><span class="comment">//多对多关联指向`post`的`likes`字段</span></div><div class="line"><span class="comment">//如果使用PuzzleInfo puzzleInfo= new PuzzleInfo();  会导致改puzzleInfo的其他数据清空</span></div><div class="line"> puzzleInfo.setLikes(relation); </div><div class="line"> puzzleInfo.update(<span class="keyword">new</span> UpdateListener() &#123;</div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">done</span><span class="params">(BmobException e)</span> </span>&#123;</div><div class="line">      <span class="keyword">if</span>(e==<span class="keyword">null</span>)&#123;</div><div class="line">         ToastUtil.shortShowText(<span class="string">"已添加到您的喜欢！"</span>);</div><div class="line">         Log.i(<span class="string">"bmob"</span>,<span class="string">"多对多关联添加成功"</span>);</div><div class="line">      &#125;<span class="keyword">else</span>&#123;</div><div class="line">         Log.i(<span class="string">"bmob"</span>,<span class="string">"失败："</span>+e.getMessage());</div><div class="line">      &#125;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/08/Bmob查询多对多/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johan007">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johan007">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/08/Bmob查询多对多/" itemprop="url">Bmob查询多对多</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-08T21:30:41+08:00">
                2017-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="使用Bmob进行多对多查询"><a href="#使用Bmob进行多对多查询" class="headerlink" title="使用Bmob进行多对多查询"></a>使用Bmob进行多对多查询</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">BmobQuery&lt;PuzzleInfo&gt; query = <span class="keyword">new</span> BmobQuery&lt;PuzzleInfo&gt;();</div><div class="line"><span class="comment">//查询playerName叫“比目”的数据</span></div><div class="line"><span class="comment">//query.addWhereEqualTo("playerName", "比目");</span></div><div class="line"><span class="comment">//返回50条数据，如果不加上这条语句，默认返回10条数据</span></div><div class="line"><span class="comment">//query.setLimit(50);</span></div><div class="line"><span class="comment">//执行查询方法</span></div><div class="line"> <span class="comment">//这里直接使用addWhereEqualTo不使用官方的addWhereRelatedTo </span></div><div class="line"><span class="comment">//addWhereRelatedTo 是用来查询关注该帖子的所有用户</span></div><div class="line">query.addWhereEqualTo(<span class="string">"likes"</span>, user); </div><div class="line">query.order(<span class="string">"-createdAt"</span>);</div><div class="line"><span class="comment">//query.addWhereRelatedTo("likes", new BmobPointer(user));</span></div><div class="line"><span class="comment">//query.include("author");// 希望在查询帖子信息的同时也把发布人的信息查询出来</span></div><div class="line">query.findObjects(<span class="keyword">new</span> FindListener&lt;PuzzleInfo&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">done</span><span class="params">(List&lt;PuzzleInfo&gt; object, BmobException e)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(e==<span class="keyword">null</span>)&#123;</div><div class="line">            Log.d(<span class="string">"test"</span>,<span class="string">"查询成功：共"</span>+object.size()+<span class="string">"条数据。"</span>);</div><div class="line">            <span class="comment">//list=object;</span></div><div class="line">            <span class="comment">//Log.d("test","数据"+object.toString());</span></div><div class="line">            <span class="comment">//Log.d("test","组数"+group(object).size()); //执行一次group(object) object就会变少</span></div><div class="line">            <span class="comment">//Log.d("test","分组数据"+group(object).toString());</span></div><div class="line">            mAdapter.addItemLast(GroupUtils.group(object));</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line"></div><div class="line">            <span class="comment">//Log.d("test","查询puzzle失败："+e.getMessage()+","+e.getErrorCode());</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/08/Bomb内部查询/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johan007">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johan007">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/08/Bomb内部查询/" itemprop="url">Bomb内部查询</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-08T13:20:24+08:00">
                2017-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>使用Bmob进行内部查询<br>例如：查询带有图片的帖子的评论列表:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">BmobQuery&lt;Comment&gt; query = <span class="keyword">new</span> BmobQuery&lt;Comment&gt;();</div><div class="line">BmobQuery&lt;Post&gt; innerQuery = <span class="keyword">new</span> BmobQuery&lt;Post&gt;();</div><div class="line">innerQuery.addWhereExists(<span class="string">"image"</span>, <span class="keyword">true</span>);</div><div class="line"><span class="comment">// 第一个参数为评论表中的帖子字段名post</span></div><div class="line"><span class="comment">// 第二个参数为Post字段的表名，也可以直接用"Post"字符串的形式</span></div><div class="line"><span class="comment">// 第三个参数为内部查询条件</span></div><div class="line">query.addWhereMatchesQuery(<span class="string">"post"</span>, <span class="string">"Post"</span>, innerQuery);</div><div class="line">query.findObjects(<span class="keyword">new</span> FindListener&lt;Comment&gt;() &#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">done</span><span class="params">(List&lt;Comment&gt; object,BmobException e)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(e==<span class="keyword">null</span>)&#123;</div><div class="line">            Log.i(<span class="string">"bmob"</span>,<span class="string">"成功"</span>);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            Log.i(<span class="string">"bmob"</span>,<span class="string">"失败："</span>+e.getMessage());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>查询多对多关联<br>如果希望查询喜欢该帖子（objectId为ESIt3334）的所有用户,那么就需要用到addWhereRelatedTo方法进行多对多关联查询。<br>示例代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 查询喜欢这个帖子的所有用户，因此查询的是用户表</span></div><div class="line">BmobQuery&lt;MyUser&gt; query = <span class="keyword">new</span> BmobQuery&lt;MyUser&gt;();</div><div class="line">Post post = <span class="keyword">new</span> Post();</div><div class="line">post.setObjectId(<span class="string">"ESIt3334"</span>);</div><div class="line"><span class="comment">//likes是Post表中的字段，用来存储所有喜欢该帖子的用户</span></div><div class="line">query.addWhereRelatedTo(<span class="string">"likes"</span>, <span class="keyword">new</span> BmobPointer(post));    </div><div class="line">query.findObjects(<span class="keyword">new</span> FindListener&lt;MyUser&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">done</span><span class="params">(List&lt;MyUser&gt; object,BmobException e)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(e==<span class="keyword">null</span>)&#123;</div><div class="line">            Log.i(<span class="string">"bmob"</span>,<span class="string">"查询个数："</span>+object.size());</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            Log.i(<span class="string">"bmob"</span>,<span class="string">"失败："</span>+e.getMessage());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">BmobQuery&lt;PuzzleInfo&gt; query = <span class="keyword">new</span> BmobQuery&lt;PuzzleInfo&gt;();</div><div class="line">BmobQuery&lt;User&gt; innerQuery = <span class="keyword">new</span> BmobQuery&lt;User&gt;();</div><div class="line">User user = <span class="keyword">new</span> User();</div><div class="line">user.setObjectId(<span class="string">"ESIt3334"</span>);</div><div class="line">innerQuery.addWhereRelatedTo(<span class="string">"following"</span>, <span class="keyword">new</span> BmobPointer(user)); </div><div class="line"><span class="comment">//innerQuery.addWhereExists("image", true);</span></div><div class="line"><span class="comment">// 第一个参数为评论表中的帖子字段名post</span></div><div class="line"><span class="comment">// 第二个参数为Post字段的表名，也可以直接用"Post"字符串的形式</span></div><div class="line"><span class="comment">// 第三个参数为内部查询条件</span></div><div class="line">query.addWhereMatchesQuery(<span class="string">"author"</span>, <span class="string">"User"</span>, innerQuery);</div><div class="line">query.findObjects(<span class="keyword">new</span> FindListener&lt;PuzzleInfo&gt;() &#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">done</span><span class="params">(List&lt;PuzzleInfo&gt; object,BmobException e)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(e==<span class="keyword">null</span>)&#123;</div><div class="line">            Log.i(<span class="string">"bmob"</span>,<span class="string">"成功"</span>);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            Log.i(<span class="string">"bmob"</span>,<span class="string">"失败："</span>+e.getMessage());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/02/高德地图的调试版SHA1与发布版SHA1分别的获取/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johan007">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johan007">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/02/高德地图的调试版SHA1与发布版SHA1分别的获取/" itemprop="url">高德地图的调试版SHA1与发布版SHA1分别的获取</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-02T21:30:41+08:00">
                2017-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>调试版SHA1的获取：<br>首先：你C盘的jdk文件夹下的bin文件的路径（C:\Program Files\Java\jdk1.7.0_51\bin）应该加到环境变量path中才能执行以下的步骤；<br>其次：找到C:\Users\admin.Android，该.android文件夹下找到debug.keystore，这是你的密钥库文件<br>然后在该密钥库所在的路径下运行cmd，输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -list -v -keystore debug.keystore</div></pre></td></tr></table></figure></p>
<p>密钥库口令可以按 ENTER 跳过，<br>即可得到调试版的SHA1。<br>发布版的SHA1的获取：<br>app为release模式时，应该有自己签名文件，是在生成apk时创建的含alias，password等参数的keystore文件，有此文件才可以与高德地图或者微信等第三方有关联存在。<br>所以，同样，找到该app相关的keystore文件的所在，进入cmd，输入<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -list -v -keystore xxxx.jks</div></pre></td></tr></table></figure></p>
<p>密钥口令是你的keystore文件的密码，再按 ENTER 即可得到发布版的SHA1。<br>下图我的keystore存在C:\Users\admin\Desktop\android下，<br>最终填写在高德地图的开发者平台应用信息那里，然后就可以申请高德地图的KEY了。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/28/长时间无操作监听/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johan007">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johan007">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/28/长时间无操作监听/" itemprop="url">长时间无操作监听</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-28T13:52:20+08:00">
                2017-03-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;  </div><div class="line">  </div><div class="line">    <span class="keyword">private</span> Handler mHandler01 = <span class="keyword">new</span> Handler();  </div><div class="line">    <span class="keyword">private</span> Handler mHandler02 = <span class="keyword">new</span> Handler();  </div><div class="line">      </div><div class="line">    <span class="comment">/* 上一次User有动作的Time Stamp */</span>  </div><div class="line">    <span class="keyword">private</span> Date lastUpdateTime;  </div><div class="line">    <span class="comment">/* 计算User有几秒没有动作的 */</span>  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">long</span> timePeriod;  </div><div class="line">      </div><div class="line">    <span class="comment">/* 静止超过N秒将自动进入屏保 */</span>  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mHoldStillTime = <span class="number">10</span>;  </div><div class="line">    <span class="comment">/*标识当前是否进入了屏保*/</span>  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isRunScreenSaver;  </div><div class="line">      </div><div class="line">    <span class="comment">/*时间间隔*/</span>  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">long</span> intervalScreenSaver = <span class="number">1000</span>;  </div><div class="line">    <span class="keyword">private</span> <span class="keyword">long</span> intervalKeypadeSaver = <span class="number">1000</span>;  </div><div class="line">      </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;  </div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);  </div><div class="line">        setContentView(R.layout.activity_main);  </div><div class="line">        ((Button)findViewById(R.id.start_screen_Saver)).setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;  </div><div class="line">              </div><div class="line">            <span class="meta">@Override</span>  </div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;  </div><div class="line">                <span class="comment">// TODO Auto-generated method stub  </span></div><div class="line">                Intent mService = <span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>, ScreenService.class);  </div><div class="line">                mService.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  </div><div class="line">                startService(mService);  </div><div class="line">            &#125;  </div><div class="line">        &#125;);  </div><div class="line">          </div><div class="line">        <span class="comment">/* 初始取得User可触碰屏幕的时间 */</span>  </div><div class="line">        lastUpdateTime = <span class="keyword">new</span> Date(System.currentTimeMillis());  </div><div class="line">    &#125;  </div><div class="line">      </div><div class="line">    <span class="comment">/** </span></div><div class="line">     * 计时线程 </div><div class="line">     */  </div><div class="line">    <span class="keyword">private</span> Runnable mTask01 = <span class="keyword">new</span> Runnable() &#123;  </div><div class="line">          </div><div class="line">        <span class="meta">@Override</span>  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;  </div><div class="line">            Date timeNow = <span class="keyword">new</span> Date(System.currentTimeMillis());  </div><div class="line">            <span class="comment">/* 计算User静止不动作的时间间距 */</span>  </div><div class="line">            <span class="comment">/**当前的系统时间 - 上次触摸屏幕的时间 = 静止不动的时间**/</span>  </div><div class="line">            timePeriod = (<span class="keyword">long</span>) timeNow.getTime() - (<span class="keyword">long</span>) lastUpdateTime.getTime();  </div><div class="line">              </div><div class="line">            <span class="comment">/*将静止时间毫秒换算成秒*/</span>  </div><div class="line">            <span class="keyword">float</span> timePeriodSecond = ((<span class="keyword">float</span>) timePeriod / <span class="number">1000</span>);  </div><div class="line">              </div><div class="line">            <span class="keyword">if</span>(timePeriodSecond &gt; mHoldStillTime)&#123;  </div><div class="line">                <span class="keyword">if</span>(isRunScreenSaver == <span class="keyword">false</span>)&#123;  <span class="comment">//说明没有进入屏保  </span></div><div class="line">                    <span class="comment">/* 启动线程去显示屏保 */</span>  </div><div class="line">                    mHandler02.postAtTime(mTask02, intervalScreenSaver);  </div><div class="line">                    <span class="comment">/*显示屏保置为true*/</span>  </div><div class="line">                    isRunScreenSaver = <span class="keyword">true</span>;  </div><div class="line">                &#125;<span class="keyword">else</span>&#123;  </div><div class="line">                    <span class="comment">/*屏保正在显示中*/</span>  </div><div class="line">                &#125;  </div><div class="line">            &#125;<span class="keyword">else</span>&#123;  </div><div class="line">                <span class="comment">/*说明静止之间没有超过规定时长*/</span>  </div><div class="line">                isRunScreenSaver = <span class="keyword">false</span>;  </div><div class="line">            &#125;  </div><div class="line">            <span class="comment">/*反复调用自己进行检查*/</span>  </div><div class="line">            mHandler01.postDelayed(mTask01, intervalKeypadeSaver);    </div><div class="line">        &#125;  </div><div class="line">    &#125;;  </div><div class="line">      </div><div class="line">    <span class="comment">/** </span></div><div class="line">     * 持续屏保显示线程 </div><div class="line">     */  </div><div class="line">    <span class="keyword">private</span> Runnable mTask02 = <span class="keyword">new</span> Runnable() &#123;  </div><div class="line">  </div><div class="line">        <span class="meta">@Override</span>  </div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;  </div><div class="line">            <span class="comment">// TODO Auto-generated method stub  </span></div><div class="line">            <span class="keyword">if</span> (isRunScreenSaver == <span class="keyword">true</span>) &#123;  <span class="comment">//如果屏保正在显示，就计算不断持续显示    </span></div><div class="line"><span class="comment">//              hideOriginalLayout();  </span></div><div class="line">                showScreenSaver();  </div><div class="line">                mHandler02.postDelayed(mTask02, intervalScreenSaver);  </div><div class="line">            &#125; <span class="keyword">else</span> &#123;  </div><div class="line">                mHandler02.removeCallbacks(mTask02);  <span class="comment">//如果屏保没有显示则移除线程  </span></div><div class="line">            &#125;  </div><div class="line">        &#125;  </div><div class="line">    &#125;;  </div><div class="line">      </div><div class="line">    <span class="comment">/** </span></div><div class="line">     * 显示屏保 </div><div class="line">     */  </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showScreenSaver</span><span class="params">()</span></span>&#123;  </div><div class="line">        Log.d(<span class="string">"danxx"</span>, <span class="string">"显示屏保------&gt;"</span>);  </div><div class="line">        Intent intent = <span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>, ScreenSaverActivity.class);  </div><div class="line">        startActivity(intent);  </div><div class="line">          </div><div class="line">    &#125;  </div><div class="line">      </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchKeyEvent</span><span class="params">(KeyEvent event)</span> </span>&#123;  </div><div class="line">        updateUserActionTime();  </div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.dispatchKeyEvent(event);  </div><div class="line">    &#125;  </div><div class="line">     <span class="meta">@Override</span>  </div><div class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</div><div class="line">        updateUserActionTime();</div><div class="line">        <span class="comment">//Log.d("test","捕获了点击");</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.dispatchTouchEvent(ev);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/*用户有操作的时候不断重置静止时间和上次操作的时间*/</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUserActionTime</span><span class="params">()</span> </span>&#123;  </div><div class="line">        Date timeNow = <span class="keyword">new</span> Date(System.currentTimeMillis());  </div><div class="line">        timePeriod = timeNow.getTime() - lastUpdateTime.getTime();  </div><div class="line">        lastUpdateTime.setTime(timeNow.getTime());  </div><div class="line">    &#125;  </div><div class="line">      </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="comment">/*activity显示的时候启动线程*/</span>  </div><div class="line">        mHandler01.postAtTime(mTask01, intervalKeypadeSaver);  </div><div class="line">        <span class="keyword">super</span>.onResume();  </div><div class="line">    &#125;  </div><div class="line">      </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;  </div><div class="line">        <span class="comment">/*activity不可见的时候取消线程*/</span>  </div><div class="line">        mHandler01.removeCallbacks(mTask01);  </div><div class="line">        mHandler02.removeCallbacks(mTask02);  </div><div class="line">        <span class="keyword">super</span>.onPause();  </div><div class="line">    &#125;  </div><div class="line">      </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="http://mt.sohu.com/20161031/n471904667.shtml" target="_blank" rel="external">参考:http://mt.sohu.com/20161031/n471904667.shtml</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/23/防止连续多次操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johan007">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Johan007">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/23/防止连续多次操作/" itemprop="url">防止连续多次操作</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-23T14:03:27+08:00">
                2017-01-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommonUtils</span> </span>&#123;</div><div class="line">    <span class="comment">// 两次次操作间隔不能少于5000毫秒</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MIN_CLICK_DELAY_TIME = <span class="number">5000</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> lastClickTime;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isFastClick</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">long</span> curClickTime = System.currentTimeMillis();</div><div class="line">        <span class="keyword">if</span> ((curClickTime - lastClickTime) &gt;= MIN_CLICK_DELAY_TIME) &#123;</div><div class="line">            Log.d(<span class="string">"test"</span>,<span class="string">"curClickTime - lastClickTime=="</span>+(curClickTime - lastClickTime));</div><div class="line">            flag = <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">        lastClickTime = curClickTime;</div><div class="line">        <span class="keyword">return</span> flag;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="Johan007" />
          <p class="site-author-name" itemprop="name">Johan007</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Johan007</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.1"></script>



  

  

  

  

  

</body>
</html>
